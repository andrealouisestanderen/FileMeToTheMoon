<!doctype html>
<html>
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Raleway" />

<body style="background-color: #05445E; font-family: 'Raleway';" onload="setWords(); setValue()">
    <div style="background-image: url(/static/cloud-computing.png); opacity: .2; background-size: 70%; position: fixed; top: 0; bottom: 0; right: 0px; left: 0;">
    </div>
    <div style=" text-align: center; 
      background-color: white; 
      padding-bottom: 400px; 
      border-radius: 5px;
      width: 700px; 
      height: 200px;
      opacity: .7;
      position: absolute; 
      top: 100px; 
      bottom: 0; 
      left: 0;
      right: 0;
      margin: auto;">

    </div>
    <h1 style="text-align: center; color: #D4F1F4; padding-top: 30px; font-size: 45px;">
        Properties Of Your File
    </h1>
    <div style="color: #05445E; text-align: center; position: relative; top: 80px; font-size: large; font-weight: bold;">
        {{ file }}
    </div>
    <div style="text-align: center;
    width: 300px;
    height: 20px;
    padding-right: 30px;
    padding-left: 30px;
    display: flex;
    flex-direction: row;
    justify-content:space-between;
    align-items: flex-end;
    position: absolute; 
    top: 0; 
    bottom: 160px; 
    left: 0;
    right: 0;
    margin: auto;
    border-bottom: 1px solid #189AB4;
    color:#05445E">
        <div style="font-size: 40px; font-weight: bolder; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
            {{ tot_w }}
        </div>
        <div style="font-size: larger">
            words
        </div>
    </div>
    <div style="text-align: center;
    width: 300px;
    height: 20px;
    padding-right: 30px;
    padding-left: 30px;
    display: flex;
    flex-direction: row;
    justify-content:space-between;
    align-items: flex-end;
    position: absolute; 
    top: 20px; 
    bottom: 0; 
    left: 0;
    right: 0;
    margin: auto;
    border-bottom: 1px solid #189AB4;
    color:#05445E">
        <div style="font-size: 40px; font-weight: bolder; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
            {{ tot_u_w }}
        </div>
        <div style="font-size: larger; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
            unique words
        </div>
    </div>
    <div style="text-align: center;
    width: 300px;
    height: 20px;
    padding-right: 30px;
    padding-left: 30px;
    display: flex;
    flex-direction: row;
    justify-content:space-between;
    align-items: flex-end;
    position: absolute; 
    top: 200px; 
    bottom: 0; 
    left: 0;
    right: 0;
    margin: auto;
    border-bottom: 1px solid #189AB4;
    color:#05445E">
        <div style="font-size: 40px; font-weight: bolder; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
            <select id="selectWord" name="column1" onchange="setValue()"></select>
        </div>
        <div id="wordcount" style="font-size: larger;">
            NaN
        </div>
    </div>
    <form style="text-align: center; ">
        <input style="text-align: center; width: 100px; height: 50px; font-size: larger; border-radius: 5px; border: none; background-color: #75E6DA; color: #189AB4; position: relative; top: 470px " type="button " value="Go back! " onclick="history.back() ">
    </form>

    <script>
        function setWords() {
            unique_words = '{{ words }}'
            var clean_unique_words = unique_words.replaceAll('&#39;', '').replaceAll('&#34;', '').replaceAll('.', '').replace('odict_keys([', '').replace('[', '').replace(']', '').split(', ');
            console.log(clean_unique_words)
            var dropdown = document.getElementById("selectWord");
            clean_unique_words.map((key, index) => {
                var option = document.createElement("option");
                if (index != 0) {
                    option.value = index;
                    option.text = key;
                } else {
                    option.value = index;
                    option.text = key;
                    option.selected = 'selected';
                }
                dropdown.appendChild(option);
            });
        }

        function setValue() {
            var wordlist = document.getElementById("selectWord");
            var index = wordlist.options[wordlist.selectedIndex].value;

            values = '{{ values }}'
            var clean_values = values.replaceAll('&#39;', '').replaceAll('&#34;', '').replaceAll('.', '').replace('odict_values([', '').replace('[', '').replace(']', '').split(', ');
            var value = clean_values[index]

            document.getElementById("wordcount").innerHTML = value;

        }
    </script>

</body>

</html>